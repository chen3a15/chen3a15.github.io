<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script>
            
            
            async function 复制(){
                let 输出 = document.getElementById("输出框");
                let 提示 = document.getElementById("提示");
                输出.select();
                输出.setSelectionRange(0, 99999);
                
                
                try {
                    await navigator.clipboard.writeText(输出.value);
                    let 粘贴板 = await navigator.clipboard.readText();
                    if (输出.value === 粘贴板){
                        提示.innerHTML = "复制成功！";
                    }
                    else {
                        提示.innerHTML = "复制失败！";
                    }
                }
                catch {
                    document.execCommand("copy");
                    提示.innerHTML = "复制成功了（大概）";
                }
                
            }
            
            function 随机字符(a){
                
                let b = ""
                for (let i in a){
                    let 后缀 = a[i].charCodeAt().toString(16)
                    let 前缀 = ""
                    for (let i = 0; i < 4 - 后缀.length; i++){
                        前缀 = 前缀 + Math.floor(Math.random() * 0xf).toString(16)
                    }
                    b = b + String.fromCharCode(parseInt(前缀 + 后缀, "16"))
                }
                
                return b
                
            }
            
            
            
            function 执行(){
                let 输入 = document.getElementById("输入框").value;
                let 输出 = document.getElementById("输出框");
                let 粗体 = document.getElementById("粗体").checked;
                let 斜体 = document.getElementById("斜体").checked;
                let 大小 = document.getElementById("大小").checked;
                let 大小值 = document.getElementById("大小值").value;
                let 颜色 = document.getElementById("颜色").checked;
                let 颜色值 = document.getElementById("颜色值").value;
                let material = document.getElementById("material").checked;
                let quad = document.getElementById("quad").checked;
                
                输出.value = 输入
                
                if (粗体){
                    let a = 随机字符("b")
                    输出.value = "<" + a + ">" + 输出.value + "</" + a + ">"
                }
                
                if (斜体){
                    let a = 随机字符("i")
                    输出.value = "<" + a + ">" + 输出.value + "</" + a + ">"
                }
                
                if (大小){
                    let a = 随机字符("size")
                    输出.value = "<" + a + "=" + 大小值 + ">" + 输出.value + "</" + a + ">"
                }
                
                if (颜色){
                    let a = 随机字符("color")
                    输出.value = "<" + a + "=" + 颜色值 + ">" + 输出.value + "</" + a + ">"
                }
                
                if (material){
                    let a = 随机字符("material")
                    输出.value = "<" + a + ">" + 输出.value + "</" + a + ">"
                }
                
                if (quad){
                    let a = 随机字符("quad")
                    输出.value = "<" + a + ">" + 输出.value + "</" + a + ">"
                }
                
                
                let 提示 = document.getElementById("提示");
                let 字符长度 = document.getElementById("字符长度");
                let 字符上限 = document.getElementById("字符上限").innerHTML;
                
                提示.innerHTML = "";
                let 输出长度 = 输出.value
                    .replace(/[\u0000-\u007f]/g, "a")
                    .replace(/[\u0080-\u07ff]/g, "aa")
                    .replace(/[\u0800-\uffff]/g,"aaa")
                    .length;
                字符长度.innerHTML = 输出长度
                
                if (输出长度 > 字符上限){
                    提示.innerHTML = "最长" + 字符上限 + "字节，当前已用" + 输出长度 + "，确定不再改改嘛";
                }
                
                
            }
            
        </script>
        <style>
            
            :root {
                --font_size: calc(1.9vh + 0.4vw);
            }
            
            body {
                margin: 0;
            }
            
            button, input, label, span, textarea {
                font-size: var(--font_size);
            }
            
            #粗体, #斜体, #大小, #颜色, #material, #quad {
                height: var(--font_size);
                width: var(--font_size);
            }
            
            
            
        </style>
        <title>原神、星铁炫酷字体</title>
    </head>
    <body>
        <form oninput="执行()">
            <label for="输入框">输入文本：</label>
            <input id="输入框" type="text" placeholder="原神，启动！"></input>
            <br />
            <input id="粗体" type="checkbox"></input>
            <label for="粗体">粗体</label>
            <br />
            <input id="斜体" type="checkbox"></input>
            <label for="斜体">斜体</label>
            <br />
            <input id="大小" type="checkbox"></input>
            <label for="大小">大小：</label>
            <input id="大小值" type="number" value="50"></input>
            <br />
            <input id="颜色" type="checkbox"></input>
            <label for="颜色">颜色：</label>
            <input id="颜色值" type="color"></input>
            <br />
            <input id="material" type="checkbox"></input>
            <label for="material">material</label>
            <br />
            <input id="quad" type="checkbox"></input>
            <label for="quad">quad</label>
        </form>
        <div id="输出">
            <textarea id="输出框" readonly="">原神，启动！</textarea>
            <br />
            <button id="更换" onclick="执行()">如果生成的代码已经被屏蔽，点击这里换一个</button>
            <button id="复制按钮" onclick="复制()">复制</button>
            <br />
            <label for="输入框" id="提示"></label>
            <div>
                <span>字符长度：</span>
                <span id="字符长度">0</span>
                <span>/</span>
                <span id="字符上限" oninput="执行()" contenteditable="true">50</span>
            </div>
        </div>
    </body>
</html>