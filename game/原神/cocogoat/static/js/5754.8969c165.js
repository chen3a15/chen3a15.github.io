"use strict";(self["define"]=self["define"]||[]).push([[5754],{87860:function(e,t,n){n.d(t,{Q8:function(){return o},Tj:function(){return r},eW:function(){return a},iD:function(){return s},rT:function(){return i}});n(670),n(80426),n(49743),n(36826),n(26263),n(77253);function r(e){return!("object"!==typeof e||!e||!("type"in e)||"number"!==typeof e.type||"undefined"!==typeof e.clone)}function o(e){return{rows:e.height,cols:e.width,type:24,data:new Uint8Array(e.data)}}function a(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(!n)throw new Error('canvas.getContext("2d") failed');return n.drawImage(e,0,0),o(n.getImageData(0,0,e.width,e.height))}function s(e){const t=e.getContext("2d");if(!t)throw new Error('canvas.getContext("2d") failed');return o(t.getImageData(0,0,e.width,e.height))}function i(e){if(24!==e.type)throw new Error(`Converting type ${e.type} to canvas faild. Only CV_8UC4 is supported.`);const t=document.createElement("canvas");t.width=e.cols,t.height=e.rows;const n=t.getContext("2d");if(!n)throw new Error("Could not get context");const r=n.createImageData(e.cols,e.rows);return r.data.set(e.data),n.putImageData(r,0,0),t}},13042:function(e,t,n){n.d(t,{zG:function(){return w}});var r=n(35512),o=n(19390),a=n(44847),s=n(7728),i=n(28341),c=n(3146),u=n(13448),f=n(60611),d=n(87860),l=n(40586);function p(){const e=(0,s.G)((()=>(console.log("[worker-macro] webpack"),new s.G(new URL(n.p+n.u(1168),n.b))))),t=(0,r.Ud)(e);return{worker:t,_worker:e}}function m(){const{worker:e,_worker:t}=p(),{worker:n,_worker:r}=p(),{onScreenShot:s,diffCached:m,diffCachedA:h,diffAB:w}=e,{onScreenShot:g}=n;let v=e=>{};const y=e=>{v=e},E=e=>{throw v(-99),e};t.addEventListener("error",E),r.addEventListener("error",E);const S=(async()=>{try{const[t,r]=(0,a.LS)(),s=i.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",d=i.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,a.sB)([s,d,"yas.ort"],(e=>v(e)),r);const p={map:f.Z,characters:u.Z,amos:(0,l.Z)(c.ag.amos),params:(0,l.Z)(c.ag.atifactParams)};await Promise.all([e.setResources(o.ZP),n.setResources(o.ZP),e.initMap(p),n.initMap(p)]),v(100)}catch(s){throw v(-1),s}t.removeEventListener("error",E),r.removeEventListener("error",E),await Promise.all([e.init(),n.init()])})();return{onScreenShot:s,onScreenShot2:g,initPromise:S,workerCV:e,workerOCR:n,onProgress:y,IMatFromImageElement:d.eW,diffAB:w,diffCached:m,diffCachedA:h}}let h;function w(){return h||(h=m()),h}},53374:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(10311);function o(e,t,n,o,a,s){const i=(0,r.resolveComponent)("router-view"),c=(0,r.resolveComponent)("Loader");return e.done?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0})):((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,source:e.source,instance:e.instance,onDone:t[0]||(t[0]=t=>e.done=!0)},null,8,["source","instance"]))}var a=n(96181),s=(0,r.defineComponent)({components:{Loader:a.Z},props:{source:{type:String,required:!0},instance:{type:Function,required:!0}},setup(){return{done:(0,r.ref)(!1)}}}),i=n(14545);const c=(0,i.Z)(s,[["render",o]]);var u=c},26570:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(10311);function o(e,t,n,o,a,s){const i=(0,r.resolveComponent)("Router");return(0,r.openBlock)(),(0,r.createBlock)(i,{source:"artifact",instance:e.getScannerInstance},null,8,["instance"])}var a=n(53374),s=n(13042),i=(0,r.defineComponent)({components:{Router:a.Z},setup(){return{getScannerInstance:s.zG}}}),c=n(14545);const u=(0,c.Z)(i,[["render",o]]);var f=u},35512:function(e,t,n){n.d(t,{Jj:function(){return d},Ud:function(){return m}});n(23662),n(77253),n(16329);const r=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.thrown"),i=e=>"object"===typeof e&&null!==e||"function"===typeof e,c={canHandle:e=>i(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return d(e,t),[n,[n]]},deserialize(e){return e.start(),m(e)}},u={canHandle:e=>i(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},f=new Map([["proxy",c],["throw",u]]);function d(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:a,path:i}=Object.assign({path:[]},r.data),c=(r.data.argumentList||[]).map(C);let u;try{const t=i.slice(0,-1).reduce(((e,t)=>e[t]),e),n=i.reduce(((e,t)=>e[t]),e);switch(a){case"GET":u=n;break;case"SET":t[i.slice(-1)[0]]=C(r.data.value),u=!0;break;case"APPLY":u=n.apply(t,c);break;case"CONSTRUCT":{const e=new n(...c);u=S(e)}break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;d(e,n),u=E(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[s]:0}}Promise.resolve(u).catch((e=>({value:e,[s]:0}))).then((e=>{const[r,s]=k(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),"RELEASE"===a&&(t.removeEventListener("message",n),p(t))}))})),t.start&&t.start()}function l(e){return"MessagePort"===e.constructor.name}function p(e){l(e)&&e.close()}function m(e,t){return w(e,[],t)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function w(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(n,o){if(h(r),o===a)return()=>b(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{p(e),r=!0}));if("then"===o){if(0===t.length)return{then:()=>s};const n=b(e,{type:"GET",path:t.map((e=>e.toString()))}).then(C);return n.then.bind(n)}return w(e,[...t,o])},set(n,o,a){h(r);const[s,i]=k(a);return b(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:s},i).then(C)},apply(n,a,s){h(r);const i=t[t.length-1];if(i===o)return b(e,{type:"ENDPOINT"}).then(C);if("bind"===i)return w(e,t.slice(0,-1));const[c,u]=v(s);return b(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(C)},construct(n,o){h(r);const[a,s]=v(o);return b(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:a},s).then(C)}});return s}function g(e){return Array.prototype.concat.apply([],e)}function v(e){const t=e.map(k);return[t.map((e=>e[0])),g(t.map((e=>e[1])))]}const y=new WeakMap;function E(e,t){return y.set(e,t),e}function S(e){return Object.assign(e,{[r]:!0})}function k(e){for(const[t,n]of f)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},y.get(e)||[]]}function C(e){switch(e.type){case"HANDLER":return f.get(e.name).deserialize(e.value);case"RAW":return e.value}}function b(e,t,n){return new Promise((r=>{const o=L();e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}function L(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}},40586:function(e,t,n){var r=n(81319),o=1,a=4;function s(e){return(0,r.Z)(e,o|a)}t["Z"]=s}}]);