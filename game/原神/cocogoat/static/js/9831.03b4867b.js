"use strict";(self["define"]=self["define"]||[]).push([[9831],{1533:function(e,t,n){n(77253);var r=n(9385);function a(e,t,n){if("function"===typeof e&&(n=t,t=e,e=null),n<1)throw new Error("fastqueue concurrency must be greater than 1");var a=r(c),s=null,i=null,l=0,u=null,d={push:y,drain:o,saturated:o,pause:p,paused:!1,concurrency:n,running:f,resume:v,idle:g,length:m,getQueue:h,unshift:E,empty:o,kill:b,killAndDrain:N,error:x};return d;function f(){return l}function p(){d.paused=!0}function m(){var e=s,t=0;while(e)e=e.next,t++;return t}function h(){var e=s,t=[];while(e)t.push(e.value),e=e.next;return t}function v(){if(d.paused){d.paused=!1;for(var e=0;e<d.concurrency;e++)l++,w()}}function g(){return 0===l&&0===d.length()}function y(n,r){var c=a.get();c.context=e,c.release=w,c.value=n,c.callback=r||o,c.errorHandler=u,l===d.concurrency||d.paused?i?(i.next=c,i=c):(s=c,i=c,d.saturated()):(l++,t.call(e,c.value,c.worked))}function E(n,r){var c=a.get();c.context=e,c.release=w,c.value=n,c.callback=r||o,l===d.concurrency||d.paused?s?(c.next=s,s=c):(s=c,i=c,d.saturated()):(l++,t.call(e,c.value,c.worked))}function w(n){n&&a.release(n);var r=s;r?d.paused?l--:(i===s&&(i=null),s=r.next,r.next=null,t.call(e,r.value,r.worked),null===i&&d.empty()):0===--l&&d.drain()}function b(){s=null,i=null,d.drain=o}function N(){s=null,i=null,d.drain(),d.drain=o}function x(e){u=e}}function o(){}function c(){this.value=null,this.callback=o,this.next=null,this.release=o,this.context=null,this.errorHandler=null;var e=this;this.worked=function(t,n){var r=e.callback,a=e.errorHandler,c=e.value;e.value=null,e.callback=o,e.errorHandler&&a(t,c),r.call(e.context,t,n),e.release(e)}}function s(e,t,n){function r(e,n){t.call(this,e).then((function(e){n(null,e)}),n)}"function"===typeof e&&(n=t,t=e,e=null);var c=a(e,r,n),s=c.push,i=c.unshift;return c.push=l,c.unshift=u,c.drained=d,c;function l(e){var t=new Promise((function(t,n){s(e,(function(e,r){e?n(e):t(r)}))}));return t.catch(o),t}function u(e){var t=new Promise((function(t,n){i(e,(function(e,r){e?n(e):t(r)}))}));return t.catch(o),t}function d(){var e=c.drain,t=new Promise((function(t){c.drain=function(){e(),t()}}));return t}}e.exports=a,e.exports.promise=s},9385:function(e){function t(e){var t=new e,n=t;function r(){var r=t;return r.next?t=r.next:(t=new e,n=t),r.next=null,r}function a(e){n.next=e,n=e}return{get:r,release:a}}e.exports=t},87860:function(e,t,n){n.d(t,{Q8:function(){return a},Tj:function(){return r},eW:function(){return o},iD:function(){return c},rT:function(){return s}});n(670),n(80426),n(49743),n(36826),n(26263),n(77253);function r(e){return!("object"!==typeof e||!e||!("type"in e)||"number"!==typeof e.type||"undefined"!==typeof e.clone)}function a(e){return{rows:e.height,cols:e.width,type:24,data:new Uint8Array(e.data)}}function o(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(!n)throw new Error('canvas.getContext("2d") failed');return n.drawImage(e,0,0),a(n.getImageData(0,0,e.width,e.height))}function c(e){const t=e.getContext("2d");if(!t)throw new Error('canvas.getContext("2d") failed');return a(t.getImageData(0,0,e.width,e.height))}function s(e){if(24!==e.type)throw new Error(`Converting type ${e.type} to canvas faild. Only CV_8UC4 is supported.`);const t=document.createElement("canvas");t.width=e.cols,t.height=e.rows;const n=t.getContext("2d");if(!n)throw new Error("Could not get context");const r=n.createImageData(e.cols,e.rows);return r.data.set(e.data),n.putImageData(r,0,0),t}},41151:function(e,t,n){n.d(t,{Z:function(){return L}});var r=n(10311);const a={key:0,class:"wait-page"},o=(0,r.createTextVNode)("请切换到游戏窗口"),c=(0,r.createElementVNode)("br",null,null,-1),s=(0,r.createTextVNode)("打开“天地万象”页面"),i=[o,c,s],l=(0,r.createElementVNode)("div",{class:"icon"},null,-1),u={class:"text"},d={class:"count"},f={class:"scanned"},p=(0,r.createElementVNode)("div",{class:"title"},"扫描",-1),m={class:"number"},h={class:"success"},v=(0,r.createElementVNode)("div",{class:"title"},"成功",-1),g={class:"number"},y={class:"faild"},E=(0,r.createElementVNode)("div",{class:"title"},"失败",-1),w={class:"number"},b={class:"dup"},N=(0,r.createElementVNode)("div",{class:"title"},"重复",-1),x={class:"number"},k=(0,r.createElementVNode)("div",{class:"desc"},[(0,r.createTextVNode)("慢慢向下翻页"),(0,r.createElementVNode)("br"),(0,r.createTextVNode)("到达底端后点击此处结束")],-1);function V(e,t,n,o,c,s){return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[0===e.state?((0,r.openBlock)(),(0,r.createElementBlock)("div",a,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(e.$style.icon)},null,2),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(e.$style.text)},i,2)])):(0,r.createCommentVNode)("",!0),1===e.state?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:(0,r.normalizeClass)(e.$style.downPage)},[l,(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",f,[p,(0,r.createElementVNode)("div",m,(0,r.toDisplayString)(e.scanned),1)]),(0,r.createElementVNode)("div",h,[v,(0,r.createElementVNode)("div",g,(0,r.toDisplayString)(e.success),1)]),(0,r.createElementVNode)("div",y,[E,(0,r.createElementVNode)("div",w,(0,r.toDisplayString)(e.fail),1)]),(0,r.createElementVNode)("div",b,[N,(0,r.createElementVNode)("div",x,(0,r.toDisplayString)(e.duplicate),1)])]),k])],2)):(0,r.createCommentVNode)("",!0)])}var C=n(56662),S=(0,C.defineComponent)({props:{state:Number,success:Number,fail:Number,duplicate:Number,scanned:Number,capture:Boolean,inFloat:{type:Boolean,default:!0}},setup(e){if(e.inFloat){const t=(0,C.inject)("refresh");(0,C.watch)((()=>e),(async()=>{await(0,C.nextTick)(),t&&t()}),{deep:!0}),(0,C.onMounted)((async()=>{console.log("onmounted"),await(0,C.nextTick)(),t&&t()}))}return{}}}),T={icon:"icon-fea061",text:"text-f8f0b9",downPage:"down-page-b54cbd"},P=n(14545);const A={};A["$style"]=T;const D=(0,P.Z)(S,[["render",V],["__cssModules",A]]);var L=D},35512:function(e,t,n){n.d(t,{Jj:function(){return d},Ud:function(){return m}});n(23662),n(77253),n(16329);const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.thrown"),s=e=>"object"===typeof e&&null!==e||"function"===typeof e,i={canHandle:e=>s(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return d(e,t),[n,[n]]},deserialize(e){return e.start(),m(e)}},l={canHandle:e=>s(e)&&c in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},u=new Map([["proxy",i],["throw",l]]);function d(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:a,type:o,path:s}=Object.assign({path:[]},r.data),i=(r.data.argumentList||[]).map(x);let l;try{const t=s.slice(0,-1).reduce(((e,t)=>e[t]),e),n=s.reduce(((e,t)=>e[t]),e);switch(o){case"GET":l=n;break;case"SET":t[s.slice(-1)[0]]=x(r.data.value),l=!0;break;case"APPLY":l=n.apply(t,i);break;case"CONSTRUCT":{const e=new n(...i);l=b(e)}break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;d(e,n),l=w(t,[t])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[c]:0}}Promise.resolve(l).catch((e=>({value:e,[c]:0}))).then((e=>{const[r,c]=N(e);t.postMessage(Object.assign(Object.assign({},r),{id:a}),c),"RELEASE"===o&&(t.removeEventListener("message",n),p(t))}))})),t.start&&t.start()}function f(e){return"MessagePort"===e.constructor.name}function p(e){f(e)&&e.close()}function m(e,t){return v(e,[],t)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function v(e,t=[],n=function(){}){let r=!1;const c=new Proxy(n,{get(n,a){if(h(r),a===o)return()=>k(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{p(e),r=!0}));if("then"===a){if(0===t.length)return{then:()=>c};const n=k(e,{type:"GET",path:t.map((e=>e.toString()))}).then(x);return n.then.bind(n)}return v(e,[...t,a])},set(n,a,o){h(r);const[c,s]=N(o);return k(e,{type:"SET",path:[...t,a].map((e=>e.toString())),value:c},s).then(x)},apply(n,o,c){h(r);const s=t[t.length-1];if(s===a)return k(e,{type:"ENDPOINT"}).then(x);if("bind"===s)return v(e,t.slice(0,-1));const[i,l]=y(c);return k(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:i},l).then(x)},construct(n,a){h(r);const[o,c]=y(a);return k(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:o},c).then(x)}});return c}function g(e){return Array.prototype.concat.apply([],e)}function y(e){const t=e.map(N);return[t.map((e=>e[0])),g(t.map((e=>e[1])))]}const E=new WeakMap;function w(e,t){return E.set(e,t),e}function b(e){return Object.assign(e,{[r]:!0})}function N(e){for(const[t,n]of u)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},E.get(e)||[]]}function x(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function k(e,t,n){return new Promise((r=>{const a=V();e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}function V(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}},40586:function(e,t,n){var r=n(81319),a=1,o=4;function c(e){return(0,r.Z)(e,a|o)}t["Z"]=c}}]);