"use strict";(self["define"]=self["define"]||[]).push([[6197],{93341:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});var l=t(97397),r=(t(61110),t(90273)),i=(t(96266),t(72669)),d=(t(36855),t(55788),t(69424),t(6964)),o=(t(77864),t(13292)),n=(t(93316),t(29056)),s=(t(60388),t(89629),t(10311));const c=(0,s.createElementVNode)("div",{class:"topbar"},null,-1),u=(0,s.createElementVNode)("span",{class:"desc"},"点击头像切换用户",-1),v=["src"],m={class:"user-name"},h={class:"user-id"},f=(0,s.createTextVNode)("   添加 "),p={style:{"text-align":"right"}},V=["src"],w=["src"],C={class:"sel-uname"},y=(0,s.createTextVNode)("保存");function N(e,a,t,N,x,g){const k=o.$Y,U=(0,s.resolveComponent)("fa-icon"),E=n.mi,b=o.eI,_=d.EZ,I=r.nH,z=i.BT,B=i.km,S=r.ly,D=l.zd;return(0,s.openBlock)(),(0,s.createElementBlock)("section",{class:(0,s.normalizeClass)(e.$style.userManager)},[c,(0,s.createVNode)(b,{ref:"datatable","highlight-current-row":"",data:e.allUsers,class:"account-table",onCurrentChange:e.handleCurrentChange},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(k,{prop:"id"},{header:(0,s.withCtx)((()=>[u])),default:(0,s.withCtx)((a=>[(0,s.createElementVNode)("img",{class:"table-avatar",src:e.characterIcon(a.row.avatar)},null,8,v),(0,s.createElementVNode)("div",m,(0,s.toDisplayString)(a.row.name),1),(0,s.createElementVNode)("div",h,(0,s.toDisplayString)(a.row.id),1)])),_:1}),(0,s.createVNode)(k,{width:"120px"},{header:(0,s.withCtx)((()=>[(0,s.createVNode)(E,{class:"add-button",type:"primary",plain:"",style:{float:"right"},onClick:e.addUser},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(U,{icon:"plus"}),f])),_:1},8,["onClick"])])),default:(0,s.withCtx)((a=>[(0,s.createElementVNode)("div",p,[(0,s.createVNode)(E,{style:{width:"35px"},onClick:(0,s.withModifiers)((t=>e.editUser(a.row)),["prevent","stop"])},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(U,{icon:"pen-to-square"})])),_:2},1032,["onClick"]),e.allUsers.length>1?((0,s.openBlock)(),(0,s.createBlock)(E,{key:0,type:"danger",style:{width:"35px","margin-left":"2px"},plain:"",onClick:(0,s.withModifiers)((t=>e.delUser(a.row)),["prevent","stop"])},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(U,{icon:"trash-can"})])),_:2},1032,["onClick"])):(0,s.createCommentVNode)("",!0)])])),_:1})])),_:1},8,["data","onCurrentChange"]),(0,s.createVNode)(D,{modelValue:e.edit.show,"onUpdate:modelValue":a[3]||(a[3]=a=>e.edit.show=a),"custom-class":"edit-drawer",size:320,title:(e.edit.edit?"编辑":"添加")+"账号","append-to-body":!1,"z-index":900,"destroy-on-close":""},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(S,{"label-position":"left","label-width":"auto"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(I,{label:"UID"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(_,{modelValue:e.edit.id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.edit.id=a),placeholder:"100000....",size:"large"},null,8,["modelValue"])])),_:1}),(0,s.createVNode)(I,{label:"名称"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(_,{modelValue:e.edit.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.edit.name=a),placeholder:"爷真可爱",size:"large"},null,8,["modelValue"])])),_:1}),(0,s.createVNode)(I,{label:"头像"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(B,{modelValue:e.edit.avatar,"onUpdate:modelValue":a[2]||(a[2]=a=>e.edit.avatar=a),size:"large",filterable:"",class:(0,s.normalizeClass)(e.$style.avatarSel)},{prefix:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(e.$style.avatarSelPrefix)},[(0,s.createElementVNode)("img",{src:e.characterIcon(e.edit.avatar)},null,8,V)],2)])),default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.characterAmos,(a=>((0,s.openBlock)(),(0,s.createBlock)(z,{key:a.key,value:a.key,label:e.i18n.amos[a.name],class:(0,s.normalizeClass)(e.$style.userSelectorItem)},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("img",{src:e.characterIcon(a.key)},null,8,w),(0,s.createElementVNode)("span",C,(0,s.toDisplayString)(e.i18n.amos[a.name]),1)])),_:2},1032,["value","label","class"])))),128))])),_:1},8,["modelValue","class"])])),_:1})])),_:1}),(0,s.createVNode)(E,{type:"primary",size:"large",style:{width:"100%"},onClick:e.saveForm},{default:(0,s.withCtx)((()=>[y])),_:1},8,["onClick"])])),_:1},8,["modelValue","title"])],2)}t(25766);var x=t(99113),g=t(3146),k=t(19928),U=t(48206),E=t(2849),b=t(12983),_=t(10803),I=t(13448);U.library.add(E.r8p,E.Yai,E.Vui);var z=(0,s.defineComponent)({setup(){const e=(0,s.ref)(null);(0,s.watch)([e,x.ar],(()=>{var a;null===(a=e.value)||void 0===a||a.setCurrentRow(x.XE.value.find((e=>e.id===x.ar.value)))}));const a=e=>{t.value.show||e&&e.id&&e.id!==x.ar.value&&(x.ar.value=e.id)},t=(0,s.ref)({show:!1,edit:"",id:"",name:"",avatar:"PlayerGirl"});function l(){t.value={show:!0,edit:"",id:"",name:"",avatar:"PlayerGirl"}}function r(e){t.value={show:!0,edit:e.id,id:e.id,name:e.name,avatar:e.avatar}}function i(){if(["options","currentUser","cocogoat"].includes(t.value.id)||t.value.id.includes("/")||t.value.id.includes("\\")||t.value.id.includes(" "))return void k.T.alert("UID 不合适","出错了");if(!t.value.edit){if(x.XE.value.find((e=>e.id===t.value.id)))return void k.T.alert("UID 重复","出错了");const e=(0,x.Vv)();return e.user.name=t.value.name,e.user.avatar=t.value.avatar,(0,b.t8)(t.value.id,e),(0,x.hk)(),void(t.value.show=!1)}if(t.value.edit!==t.value.id){if(x.XE.value.find((e=>e.id===t.value.id)))return void k.T.alert("UID 重复","出错了");const e=(0,b.U2)(t.value.edit);(0,b.IV)(t.value.edit),(0,b.t8)(t.value.id,e)}const e=(0,b.U2)(t.value.id);e.user.name=t.value.name,e.user.avatar=t.value.avatar,(0,b.t8)(t.value.id,e),(0,x.hk)(),x.ar.value===t.value.edit&&(x.ar.value=t.value.id),t.value.show=!1}async function d(e){try{await k.T.confirm("真的要删除吗？","提示")}catch(a){return}e.id===x.ar.value&&(x.ar.value=x.XE.value[0].id),(0,b.IV)(e.id),(0,x.hk)()}return{i18n:g.ag,allUsers:x.XE,currentUser:x.ar,characterIcon:_.L,datatable:e,handleCurrentChange:a,addUser:l,editUser:r,delUser:d,edit:t,saveForm:i,characterAmos:I.Z}}}),B={userSelectorItem:"user-selector-item-a1c68a",userManager:"user-manager-af1dcf",avatarSel:"avatar-sel-adeaa5",avatarSelPrefix:"avatar-sel-prefix-a83f9c"},S=t(14545);const D={};D["$style"]=B;const T=(0,S.Z)(z,[["render",N],["__cssModules",D]]);var $=T},77864:function(e,a,t){t(1759)}}]);