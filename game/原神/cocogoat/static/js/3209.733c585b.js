(self["define"]=self["define"]||[]).push([[3209],{61358:function(e){function t(e,t){var s,a,n,r,c,o,i,l;s=3&e.length,a=e.length-s,n=t,c=3432918353,o=461845907,l=0;while(l<a)i=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*o+(((i>>>16)*o&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,r=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(i=0,s){case 3:i^=(255&e.charCodeAt(l+2))<<16;case 2:i^=(255&e.charCodeAt(l+1))<<8;case 1:i^=255&e.charCodeAt(l),i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*o+(((i>>>16)*o&65535)<<16)&4294967295,n^=i}return n^=e.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0}e.exports=t},5743:function(e,t,s){"use strict";s.d(t,{n:function(){return c}});var a=s(95144),n=s(61358),r=s.n(n);function c(e){const t={set:e.set.toString(),slot:e.slot.toString(),level:e.level.toString(),stars:e.stars.toString(),mk:e.mainstat.key.toString(),mt:e.mainstat.type.toString()};for(let a=0;a<4;a++)t[`sk${a}`]=e.substat[a]?e.substat[a].key.toString():"",t[`st${a}`]=e.substat[a]?e.substat[a].type.toString():"",t[`sv${a}`]=e.substat[a]?e.substat[a].value.toString():"";const s=(0,a.stringify)(t,{sort:(e,t)=>e.localeCompare(t)});return e.hash=r()(s).toString(16),e.hash}},13042:function(e,t,s){"use strict";s.d(t,{zG:function(){return v}});var a=s(35512),n=s(19390),r=s(44847),c=s(7728),o=s(28341),i=s(3146),l=s(13448),h=s(60611),d=s(87860),u=s(40586);function w(){const e=(0,c.G)((()=>(console.log("[worker-macro] webpack"),new c.G(new URL(s.p+s.u(1168),s.b))))),t=(0,a.Ud)(e);return{worker:t,_worker:e}}function p(){const{worker:e,_worker:t}=w(),{worker:s,_worker:a}=w(),{onScreenShot:c,diffCached:p,diffCachedA:f,diffAB:v}=e,{onScreenShot:m}=s;let y=e=>{};const g=e=>{y=e},k=e=>{throw y(-99),e};t.addEventListener("error",k),a.addEventListener("error",k);const C=(async()=>{try{const[t,a]=(0,r.LS)(),c=o.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",d=o.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,r.sB)([c,d,"yas.ort"],(e=>y(e)),a);const w={map:h.Z,characters:l.Z,amos:(0,u.Z)(i.ag.amos),params:(0,u.Z)(i.ag.atifactParams)};await Promise.all([e.setResources(n.ZP),s.setResources(n.ZP),e.initMap(w),s.initMap(w)]),y(100)}catch(c){throw y(-1),c}t.removeEventListener("error",k),a.removeEventListener("error",k),await Promise.all([e.init(),s.init()])})();return{onScreenShot:c,onScreenShot2:m,initPromise:C,workerCV:e,workerOCR:s,onProgress:g,IMatFromImageElement:d.eW,diffAB:v,diffCached:p,diffCachedA:f}}let f;function v(){return f||(f=p()),f}},73051:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return pe}});var a=s(10311);function n(e,t,s,n,r,c){const o=(0,a.resolveComponent)("c-ready"),i=(0,a.resolveComponent)("c-progress"),l=(0,a.resolveComponent)("float-content-b"),h=(0,a.resolveComponent)("web-capturer");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(e.$style.scannerUi)},[3===e.step?((0,a.openBlock)(),(0,a.createBlock)(o,{key:0})):e.step>3?((0,a.openBlock)(),(0,a.createBlock)(i,{key:1})):(0,a.createCommentVNode)("",!0),((0,a.openBlock)(),(0,a.createBlock)(h,{key:e.capKey,ref:"cap",popup:e.step>2&&e.step<5,onExit:t[0]||(t[0]=t=>e.step>3?e.step=5:e.reset()),onReady:t[1]||(t[1]=t=>e.step=3)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{state:4===e.step?1:0,success:e.resT.length,fail:e.resF.length,scanned:e.scanned,duplicate:e.duplicates,webControlEnabled:e.windowId>0?1:void 0},null,8,["state","success","fail","scanned","duplicate","webControlEnabled"])])),_:1},8,["popup"]))],2)])}s(77253),s(25766);var r=s(50673),c=s(25194),o=s(87860),i=s(13042),l=s(1533),h=s.n(l),d=s(5743),u=s(40),w=s.n(u);const p=document.createElement("canvas");let f=new AbortController;const v=(0,r.Q_)("artifact-capture-scanner",{state:()=>(f.abort(),f=new AbortController,{step:1,capKey:Date.now(),scanner:null,cap:null,panelRect:{x:0,y:0,width:0,height:0},centerRect:{x:0,y:0,width:0,height:0},countRect:{x:0,y:0,width:0,height:0},blocks:null,rawBlocks:null,rectx1:0,recty1:0,cols:0,rows:0,renderLatancy:0,queue:null,results:[],resultHashes:[],scanned:0,duplicates:0,cachedScroll:0,last:!1,lastBeforPaged:null}),getters:{resF:e=>e.results.filter((e=>!e.success)),resT:e=>e.results.filter((e=>e.success))},actions:{capture(){if(!this.cap)throw new Error("No video");return this.cap.capture({x:0,y:0,w:0,h:0})},capturePanel(){if(!this.cap)throw new Error("No video");return this.cap.capture({x:this.panelRect.x,y:this.panelRect.y,w:this.panelRect.width,h:this.panelRect.height})},async scrollCheckBlocks(e,t){if(!this.scanner)throw new Error("No scanner");if(e&&t){const s=await this.scanner.diffAB({rows:e.rows,cols:e.cols,data:e.data,type:e.type},{rows:t.rows,cols:t.cols,data:t.data,type:t.type});if(console.log("->drag-diff="+s),s<100)return this.last=!0,console.log("->paging-done"),!0}else console.log("->drag-diff=-1 (maybe first time)");return!1},async scrollToNext(){if(!this.scanner||!this.cap)throw new Error("No scanner");if(this.cap.windowId<=0)return;if(console.log("->drag-scroll"),await this.getBlocks(!0),!this.rawBlocks)throw new Error("No blocks");this.cap.onFrame((()=>{}));const e={x:this.centerRect.x+this.rawBlocks.x[0],y:this.centerRect.y+this.rawBlocks.y[this.rawBlocks.y.length-1]},t={x:this.centerRect.x+this.rawBlocks.x[0],y:0};await w()(50),await this.cap.drag(e,t,1500,20,400);const s=this.lastBeforPaged;await w()(600),await this.getBlocks(!0);const a=this.lastBeforPaged;await this.scrollCheckBlocks(s,a)},async getBlocks(e=!1){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");const t=this.cap.capture({x:this.centerRect.x,y:this.centerRect.y,w:this.centerRect.width,h:this.centerRect.height});e&&(this.lastBeforPaged=t);const s=await this.scanner.workerCV.analyzeBlocks(t),a=[];for(const n of s.y)for(const e of s.x)a.push({x:e,y:n});this.rectx1=s.x[1],this.recty1=s.y[2],this.rows=s.y.length,this.cols=s.x.length,this.blocks=a,this.rawBlocks=s},async getLatency(){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");if(!this.blocks)throw new Error("No blocks scanned");const e=this.blocks[2];if(!e)throw new Error("No blocks left");console.log("-> Latency measurement started");const t=this.cap.click;try{const s=await(0,c.s)(this.scanner.diffCached.bind(this.scanner),this.capturePanel,(async()=>{t(this.centerRect.x+e.x,this.centerRect.y+e.y)}));this.renderLatancy=Math.max(120,Math.min(80,s.latency)),console.log("-> Latency measurement done:",s)}catch(s){console.warn(s),this.renderLatancy=80}},async switcherLoop(){if(!this.cap)throw new Error("No video");if(!this.queue)throw new Error("No queue");if(!this.scanner)throw new Error("No scanner");const e=this.scanner,t=this.queue;while(4===this.step){null===this.blocks&&await this.getBlocks(),this.renderLatancy||await this.getLatency(),await e.diffCached(!1);let s,a=0;this.cap.onFrame((async()=>{if(a++,a%2==0)return;const s=this.capturePanel(),n=await e.diffCached(s);n>5&&(this.scanned++,t.push({image:s,id:this.scanned}))}));while(4===this.step&&this.blocks&&(s=this.blocks.shift()))await this.cap.click(this.centerRect.x+s.x,this.centerRect.y+s.y),await w()(Math.min(70,Math.max(120,this.renderLatancy/2||60)));if(4!==this.step)break;this.blocks&&0===this.blocks.length&&!this.last&&(await this.scrollToNext(),this.blocks=null),this.last&&(this.step=5)}},async waitForSwitch(){if(!this.scanner||!this.cap)throw new Error("No scanner");const e=await(0,c.h)(this.scanner.diffCached.bind(this.scanner),this.capturePanel,{interval:50,threhold:8,signal:f.signal,timeout:5e3});return console.log("->changed",e.result),e.image},async analyzeUI(){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");const e=this.capture(),t=await this.scanner.workerCV.analyzeBag(e);this.panelRect=t.panelRect,this.centerRect=t.centerRect,this.countRect=t.countRect,p.width=t.panelRect.width,p.height=t.panelRect.height,await Promise.all([this.scanner.workerCV.setCachedBag(t),this.scanner.workerOCR.setCachedBag(t)]),console.log("->analyzeUI",t)},async scannerLoop(){if(!this.cap)throw new Error("No video");if(this.queue&&this.queue.killAndDrain(),this.queue=h().promise(m.worker,1),await this.analyzeUI(),this.cap.windowId>0)return this.switcherLoop();let e=this.capturePanel();while(4===this.step){e&&(this.scanned++,this.queue.push({image:e,id:this.scanned}));try{e=await this.waitForSwitch()}catch(t){e=await this.capturePanel()}}},async worker({image:e,id:t}){if(!this.scanner)throw new Error("No scanner");if(!this.queue)throw new Error("No queue");if(!e)return;let s=1,a=this.scanner.onScreenShot;2===this.queue.concurrency&&t%2===0&&(a=this.scanner.onScreenShot2,s=2);const n=await a(e),r={...n,image:(0,o.rT)(e).toDataURL()};if(r.success&&r.artifact){if(this.cap&&this.cap.windowId>0&&r.artifact.stars<5)return void(this.step=5);const e=(0,d.n)(r.artifact);this.resultHashes.includes(e)?(this.duplicates++,console.log(`->${s}dup`,r.artifact)):(this.results.push(r),this.resultHashes.push(e))}else this.results.push(r),console.warn(`->${s}fail`,r),(new Image).src=(0,o.rT)(e).toDataURL()}}}),m=v();(0,a.watch)((()=>m.step),(async e=>{return 1===e&&m.cap&&m.cap.reset(),4===e?(m.scanner=(0,i.zG)(),void m.scannerLoop()):5===e?(m.queue&&(m.queue.concurrency=2),console.log("->waiting for queue"),await(null===(t=m.queue)||void 0===t?void 0:t.push({image:null,id:-1})),console.log("->done"),void(m.step=6)):6===e&&m.cap?(f.abort(),f=new AbortController,void m.cap.stop()):void 0;var t}));var y=s(29056),g=(s(60388),s(84136));s(36805);const k={class:"content"},C=(0,a.createElementVNode)("div",{class:"title"},"还差最后一步",-1),b={class:"desc"},x=(0,a.createTextVNode)(" 请手动切换到背包的圣遗物界面，然后点击下面按钮继续 "),E=(0,a.createElementVNode)("br",null,null,-1),B={key:0},N={key:1},R={key:2},S={class:"l"},V={class:"m"},I=(0,a.createElementVNode)("div",{class:"t"},"我已打开圣遗物背包",-1),T={key:0,class:"d"},L={key:1,class:"d"},P={class:"r"};function z(e,t,s,n,r,c){const o=g.v,i=(0,a.resolveComponent)("fa-icon"),l=y.mi;return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(e.$style.ready)},[(0,a.createElementVNode)("div",k,[C,(0,a.createElementVNode)("div",b,[x,E,e.hasPictureInPicture?((0,a.openBlock)(),(0,a.createElementBlock)("div",B,"如果没有看到悬浮窗，请点击页面空白处")):e.windowId>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",N,[(0,a.createVNode)(o,{title:"当前浏览器不支持悬浮窗",description:"如需中断扫描，请按 Win 键",type:"error","show-icon":""})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",R,[(0,a.createVNode)(o,{title:"当前浏览器不支持悬浮窗",description:"完成翻页后，请点击“停止共享屏幕”按钮或手动回到本窗口点击停止扫描",type:"error","show-icon":""})])),e.windowId>0?((0,a.openBlock)(),(0,a.createBlock)(o,{key:3,title:"自动扫描器只扫描五星圣遗物",description:"圣遗物扫描器仍在测试中，如有问题请及时反馈...",type:"warning","show-icon":""})):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(l,{class:"start-btn start-gray",onClick:t[0]||(t[0]=t=>e.step++)},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",S,[(0,a.createVNode)(i,{icon:"toggle-on"})]),(0,a.createElementVNode)("div",V,[I,e.windowId>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",T,"将自动切换到原神窗口并开始切换")):((0,a.openBlock)(),(0,a.createElementBlock)("div",L,"点击后请回到原神窗口并手动切换圣遗物"))]),(0,a.createElementVNode)("div",P,[(0,a.createVNode)(i,{icon:"angle-right"})])])),_:1})],2)}var M=s(48206),A=s(2849),q=s(28341);M.library.add(A.WZW);var F=(0,a.defineComponent)({setup(){const e=v();return{hasPictureInPicture:q.hasPictureInPicture,step:(0,a.toRef)(e,"step"),windowId:(0,a.computed)((()=>{var t;return(null===(t=e.cap)||void 0===t?void 0:t.windowId)||-1}))}}}),$={ready:"ready-df0c59"},Z=s(14545);const _={};_["$style"]=$;const U=(0,Z.Z)(F,[["render",z],["__cssModules",_]]);var D=U;const H={class:"inline-status"},K={key:0,class:"no-box"},W={key:1,class:"pbar"},G={key:0,class:"pbar-bar-text"};function O(e,t,s,n,r,c){const o=(0,a.resolveComponent)("float-content");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(e.$style.statusInner),onClick:t[1]||(t[1]=t=>4===e.step&&(e.step=5))},[(0,a.createElementVNode)("div",H,[(0,a.createVNode)(o,{"in-float":!1,capture:!1,state:1,success:e.resT.length,fail:e.resF.length,scanned:e.scanned,duplicate:e.duplicates},null,8,["success","fail","scanned","duplicate"])]),4===e.step?((0,a.openBlock)(),(0,a.createElementBlock)("div",K,(0,a.toDisplayString)(e.windowId>0?"自动切换进行中":"请手动切换圣遗物，并点这里停止"),1)):(0,a.createCommentVNode)("",!0),e.step>4?((0,a.openBlock)(),(0,a.createElementBlock)("div",W,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pbar-bar",{finish:6===e.step}])},[(0,a.createElementVNode)("div",{class:"pbar-bar-in",style:(0,a.normalizeStyle)({width:(e.resT.length+e.resF.length+e.duplicates)/e.scanned*100+"%"})},null,4),6===e.step?((0,a.openBlock)(),(0,a.createElementBlock)("div",G,"完成")):(0,a.createCommentVNode)("",!0)],2),6===e.step?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"restart",onClick:t[0]||(t[0]=(...t)=>e.reset&&e.reset(...t))},"重新开始")):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)],2)}var j=s(41151),Q=(0,a.defineComponent)({components:{FloatContent:j.Z},setup(){const e=v();return{step:(0,a.toRef)(e,"step"),resT:(0,a.toRef)(e,"resT"),resF:(0,a.toRef)(e,"resF"),scanned:(0,a.toRef)(e,"scanned"),duplicates:(0,a.toRef)(e,"duplicates"),capKey:(0,a.toRef)(e,"capKey"),windowId:(0,a.computed)((()=>{var t;return(null===(t=e.cap)||void 0===t?void 0:t.windowId)||-1})),reset:()=>e.$reset()}}}),J={statusInner:"status-inner-cb54bb"};const X={};X["$style"]=J;const Y=(0,Z.Z)(Q,[["render",O],["__cssModules",X]]);var ee=Y;function te(e,t,s,n,r,c){return(0,a.openBlock)(),(0,a.createElementBlock)("div")}const se="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M421.646 361.414v-93.081c0-7.562 2.678-13.996 8.038-19.366 5.354-5.346 11.812-8.022 19.366-8.022h246.373c7.562 0 14.012 2.676 19.356 8.022 5.37 5.372 8.038 11.804 8.038 19.366v246.405c0 7.554-2.668 13.988-8.038 19.358-5.346 5.328-11.794 8.024-19.356 8.024H602.35v202.605c0 10.576-3.736 19.582-11.254 27.102-7.484 7.462-16.514 11.232-27.1 11.232H219.07c-10.574 0-19.616-3.77-27.112-11.232-7.508-7.52-11.254-16.526-11.254-27.102V399.758c0-10.588 3.748-19.594 11.254-27.112 7.496-7.484 16.538-11.232 27.112-11.232h202.573zm0 60.234H279.31c-10.574 0-19.618 3.748-27.112 11.232-7.508 7.52-11.254 16.526-11.254 27.112v224.497c0 10.576 3.748 19.582 11.254 27.102 7.494 7.462 16.538 11.232 27.112 11.232h224.455c10.586 0 19.616-3.77 27.1-11.232 7.52-7.52 11.254-16.526 11.254-27.102V542.118h-93.066c-7.554 0-14.012-2.694-19.366-8.024-5.362-5.37-8.038-11.804-8.038-19.358v-93.088zm87.64-120.47c-7.554 0-14.012 2.678-19.366 8.024-5.362 5.37-8.038 11.804-8.038 19.368v125.936c0 7.554 2.678 13.988 8.038 19.358 5.354 5.33 11.812 8.024 19.366 8.024h125.906c7.562 0 14.012-2.694 19.356-8.024 5.37-5.37 8.037-11.804 8.037-19.358V328.57c0-7.562-2.667-13.996-8.037-19.368-5.346-5.346-11.794-8.024-19.356-8.024H509.288zM225.169 85.038l-49.932-28.83c-14.406-8.319-19.342-26.737-11.024-41.14s26.736-19.343 41.14-11.025l104.332 60.234c14.404 8.318 19.342 26.736 11.024 41.14L260.473 209.75c-8.318 14.406-26.736 19.342-41.14 11.024s-19.342-26.736-11.024-41.14l23.282-40.326c-40.44 15.522-74.804 37.426-103.092 65.712-42.704 42.704-71.337 99.733-85.903 171.087L.002 333.512c14.744-71.535 43.36-128.545 85.85-171.037 36.211-36.212 82.65-62.026 139.315-77.442zm536.998 808.386l49.932 28.828c14.404 8.318 19.342 26.736 11.024 41.14s-26.736 19.342-41.14 11.024L677.651 914.18c-14.404-8.318-19.341-26.736-11.024-41.14l60.236-104.331c8.318-14.404 26.736-19.342 41.14-11.024s19.342 26.736 11.024 41.14l-23.282 40.326c40.44-15.52 74.804-37.424 103.092-65.712 42.704-42.704 71.338-99.734 85.904-171.09l42.591 42.592c-14.744 71.534-43.36 128.548-85.85 171.038-36.211 36.212-82.649 62.025-139.315 77.441z'/%3E%3C/svg%3E",ae="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M468.867 212.468a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 383.4a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 554.334a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM609.448 651.782L512 749.229l-97.448-97.447c-17.572-17.573-43.132-17.573-59.107 0s-17.573 43.132 0 59.107l127.8 127.8c7.987 7.988 20.767 12.78 30.353 12.78s20.767-4.792 30.352-12.78l127.8-127.8c17.573-17.572 17.573-43.132 0-59.107-19.17-17.573-44.73-17.573-62.302 0z'/%3E%3Cpath d='M555.133 0h-84.668C302.727 0 171.732 132.593 171.732 298.733v426.534c0 166.14 132.592 298.733 298.733 298.733h84.668c166.14 0 298.733-132.593 298.733-298.733V298.733C852.268 132.593 721.273 0 555.133 0zM767.6 723.67c0 119.812-94.253 212.467-212.468 212.467h-84.668c-119.813 0-212.468-94.252-212.468-212.468V298.733c0-119.813 94.253-212.468 212.468-212.468h84.668c119.812 0 212.468 94.253 212.468 212.468V723.67z'/%3E%3C/svg%3E",ne=new Image;ne.src=se;const re=new Image;re.src=ae;var ce=(0,a.defineComponent)({props:{state:Number,success:Number,fail:Number,duplicate:Number,scanned:Number,webControlEnabled:Number},setup(e){const t=(0,a.inject)("canvas");function s(){const e=t.value.getContext("2d");e.textAlign="left",e.fillStyle="#fff",e.fillRect(0,0,t.value.width,t.value.height),e.fillStyle="#7e7e7e",e.fillRect(0,0,.28*t.value.width,t.value.height),e.drawImage(ne,.05*t.value.width,.112*t.value.width,.18*t.value.width,.18*t.value.width),e.fillStyle="#999",e.font=.056*t.value.width+"px 微软雅黑",e.fillText("请切换到游戏窗口",.42*t.value.width,.18*t.value.width),e.fillText("打开圣遗物背包页面",.4*t.value.width,.26*t.value.width)}function n(){const s=t.value.getContext("2d");s.textAlign="left",s.fillStyle="#fff",s.fillRect(0,0,t.value.width,t.value.height),s.fillStyle="#4096fe",s.fillRect(0,0,.28*t.value.width,t.value.height),s.drawImage(re,.05*t.value.width,.112*t.value.width,.18*t.value.width,.18*t.value.width),s.font=.044*t.value.width+"px 微软雅黑",e.webControlEnabled&&e.webControlEnabled>0?(s.fillText("自动切换进行中，请勿移动鼠标",.348*t.value.width,.292*t.value.width),s.fillText("如需中断，请按 Win 键停止切换",.356*t.value.width,.352*t.value.width)):(s.fillText("手动切换圣遗物 完成后点此结束",.328*t.value.width,.292*t.value.width),s.fillText("尽量不要移动鼠标到圣遗物详情内",.316*t.value.width,.352*t.value.width)),s.fillText("扫描",.34*t.value.width,.092*t.value.width),s.fillStyle="#00b57a",s.fillText("成功",.508*t.value.width,.092*t.value.width),s.fillStyle="#cf0000",s.fillText("失败",.676*t.value.width,.092*t.value.width),s.fillStyle="#999",s.fillText("重复",.844*t.value.width,.092*t.value.width),r()}function r(){if(0===e.state)return;const s=t.value.getContext("2d");s.fillStyle="#fff",s.fillRect(.28*t.value.width,.112*t.value.width,.72*t.value.width,.12*t.value.width),s.font=.08*t.value.width+"px 微软雅黑",s.textAlign="center",s.fillStyle="#4096fe",s.fillText((e.scanned||0).toString(),.38*t.value.width,.2*t.value.width),s.fillStyle="#00b57a",s.fillText((e.success||0).toString(),.552*t.value.width,.2*t.value.width),s.fillStyle="#cf0000",s.fillText((e.fail||0).toString(),.72*t.value.width,.2*t.value.width),s.fillStyle="#999",s.fillText((e.duplicate||0).toString(),.888*t.value.width,.2*t.value.width)}return(0,a.watch)((()=>e.state),(e=>{0===e?s():n()})),(0,a.watch)(e,(()=>{r()}),{deep:!0}),(0,a.onMounted)((()=>{0===e.state?s():n()})),{}}});const oe=(0,Z.Z)(ce,[["render",te]]);var ie=oe,le=s(57385),he=(0,a.defineComponent)({components:{CReady:D,CProgress:ee,FloatContentB:ie,WebCapturer:le.Z},setup(){const e=(0,a.ref)(!1),t=v();return t.$reset(),{load:e,step:(0,a.toRef)(t,"step"),resT:(0,a.toRef)(t,"resT"),resF:(0,a.toRef)(t,"resF"),scanned:(0,a.toRef)(t,"scanned"),duplicates:(0,a.toRef)(t,"duplicates"),capKey:(0,a.toRef)(t,"capKey"),cap:(0,a.toRef)(t,"cap"),windowId:(0,a.computed)((()=>{var e;return(null===(e=t.cap)||void 0===e?void 0:e.windowId)||-1})),reset:()=>t.$reset()}}}),de={scannerUi:"scanner-ui-a7d844"};const ue={};ue["$style"]=de;const we=(0,Z.Z)(he,[["render",n],["__cssModules",ue]]);var pe=we}}]);